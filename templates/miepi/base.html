<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>{% block title %}Pase de Lista{% endblock %}</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<!-- SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<style>
:root{
  --bg-main:linear-gradient(135deg,#c7d2fe,#fbcfe8);
  --bg-glass:rgba(255,255,255,.75);
  --bg-card:rgba(255,255,255,.82);
  --text-main:#334155;
  --text-muted:#64748b;
  --border-main:rgba(203,213,245,.8);
  --icon-color:#334155;
  --table-head:rgba(0,0,0,.04);
}

.dark{
  --bg-main:linear-gradient(135deg,#020617,#1e293b);
  --bg-glass:rgba(2,6,23,.75);
  --bg-card:rgba(2,6,23,.8);
  --text-main:#e5e7eb;
  --text-muted:#94a3b8;
  --border-main:rgba(51,65,85,.8);
  --icon-color:#ffffff;
  --table-head:rgba(255,255,255,.06);
}

/* Reset y básicos */
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:Inter,sans-serif;
  background:var(--bg-main);
  color:var(--text-main);
  min-height:100vh;
  overflow-x:hidden;
}
.wrapper{display:flex;min-height:100vh;}

/* Sidebar */
#sidebar{
  width:260px;
  background:var(--bg-glass);
  backdrop-filter:blur(16px);
  border-right:1px solid var(--border-main);
  display:flex;
  flex-direction:column;
}
.logo{
  height:64px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  font-size:22px;
  font-weight:700;
  border-bottom:1px solid var(--border-main);
}
.logo img{height:32px}

/* Sidebar nav */
nav{flex:1;padding:16px;}
nav p{
  font-size:11px;
  text-transform:uppercase;
  color:var(--text-muted);
  margin:16px 0 8px;
}
nav a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px;
  color:var(--text-muted);
  text-decoration:none;
  border-radius:10px;
  transition: all 0.3s;
}
nav a:hover{
  background:rgba(0,0,0,.08);
  color:var(--text-main);
}

/* Logout */
.logout{
  padding:10px;
  border-top:1px solid var(--border-main);
}
.logout button{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px;
  border-radius:10px;
  color:#dc2626;
  background:none;
  border:none;
  cursor:pointer;
  font-weight:600;
  transition: all 0.3s;
}
.logout button:hover{
  background:rgba(220,38,38,.1);
}

/* MAIN */
.main{flex:1;display:flex;flex-direction:column;overflow:hidden}

/* Header */
header{
  height:64px;
  background:var(--bg-glass);
  backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border-main);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  position:relative;
}
.header-left img{height:32px;}
.header-title{
  flex:1;
  text-align:center;
  font-weight:600;
  font-size:18px;
  color:var(--text-main);
}
.header-right{
  display:flex;
  align-items:center;
  gap:8px;
}

/* Avatar */
.avatar{
  width:40px;height:40px;border-radius:50%;
  background:linear-gradient(135deg,#c7d2fe,#fbcfe8);
  display:flex;align-items:center;justify-content:center;font-weight:700;
}

main{
  flex:1;
  padding:24px;
  overflow-y:auto;
}

/* Cards */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-bottom:24px;
}
.card{
  background:var(--bg-card);
  backdrop-filter:blur(16px);
  border:1px solid var(--border-main);
  border-radius:16px;
  padding:20px;
  transition: background 0.3s,color 0.3s,border-color 0.3s;
}
.card h4{
  font-size:12px;
  text-transform:uppercase;
  color:var(--text-muted);
}
.card p{
  font-size:28px;
  font-weight:700;
  margin-top:8px;
}

/* Badges */
.badge{
  padding:6px 14px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
}
.present{background:rgba(34,197,94,.2);color:#16a34a}
.late{background:rgba(234,179,8,.2);color:#ca8a04}
.absent{background:rgba(239,68,68,.2);color:#dc2626}

/* Footer */
footer{
  padding:12px;
  text-align:center;
  font-size:12px;
  border-top:1px solid var(--border-main);
  background:var(--bg-glass);
}

/* BOTONES GENERALES */
button{
  background:none;
  border:none;
  cursor:pointer;
  font-family:Inter,sans-serif;
}

/* Botón de modo oscuro y otros iconos */
#themeIcon{
  font-size:18px;
}

.logout button{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  flex-wrap: nowrap;
  gap:6px;
  padding:12px;
  border-radius:10px;
  color:#dc2626;
  background:none;
  border:none;
  cursor:pointer;
  font-weight:600;
  width:120%;
  box-sizing:border-box;
  transition: all 0.3s;
}

.logout button:hover{
  background:rgba(220,38,38,.1);
}

/* FORM-CARD */
.form-card {
  background: rgba(255, 255, 255, 0.44);
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.1);
  backdrop-filter: blur(16px);
  transition: background 0.3s, color 0.3s;
}

/* INPUTS Y SELECTS */
input, select, textarea {
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-top:4px;
  background: rgba(255,255,255,0.85);
  color: #334155;
  transition: all 0.3s;
}
label{color:#444; font-size:14px;}

/* MODO OSCURO */
.dark .card,
.dark .table-box,
.dark table th,
.dark table td,
.dark .form-card,
.dark input,
.dark select,
.dark textarea {
  background: var(--bg-card) !important;
  color: var(--text-main) !important;
  border-color: var(--border-main) !important;
}
.dark thead{
  background: var(--table-head) !important;
}
.dark label{
  color: var(--text-main) !important;
}

/* Responsive */
@media(max-width:768px){
  .wrapper{flex-direction:column;}
  #sidebar{width:100%;border-right:none;border-bottom:1px solid var(--border-main);}
  header{padding:0 12px;}
  .cards{grid-template-columns:1fr;}
  table th, table td{padding:10px;font-size:12px;}
}
</style>

<script>
// Aplicar tema antes de cargar para evitar flash
if(localStorage.getItem("theme")==="dark"){
  document.documentElement.classList.add("dark");
}
</script>

</head>
{% block extra_js %}{% endblock %}

<body>
<div class="wrapper">

<aside id="sidebar">
<div class="logo">
EBV
</div>

<nav>
<p>Principal</p>
<a href="{% url 'miepi:dashboard' %}"><i class="fa-solid fa-gauge"></i>Registro</a>

<p>Módulos</p>
<a href="{% url 'miepi:inscritos_list' %}"><i class="fa-solid fa-file-signature"></i>Lista de Inscritos</a>
<a href="{% url 'miepi:escanear_asistencia' %}"><i class="fa-solid fa-clipboard-user"></i>Pase de lista</a>
<a href="{% url 'miepi:lista_asistencias' %}"><i class="fa-solid fa-clipboard-user"></i>Asistencias</a>
</nav>

<div class="logout">
<form method="post" action="{% url 'miepi:logout' %}">
{% csrf_token %}
<button type="submit"><i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión</button>
</form>
</div>
</aside>

<div class="main">

<header>
<div class="header-left">
  <img src="https://www.miepi.com/images/1miepi/LogoMIEPI.png" alt="Logo Izquierdo">
</div>

<div class="header-title">{% block header_title %}Pase de Lista{% endblock %}</div>

<div class="header-right">
  <div class="avatar">{{ usuario_inicial }}</div>
  <img src="https://www.miepi.com/images/4ebv/logoEBV.png" alt="Logo Derecho" style="height:32px;">
  <button onclick="toggleTheme()">
    <i id="themeIcon" class="fa-solid fa-moon" style="color:var(--icon-color)"></i>
  </button>
</div>
</header>

<main>
{% block content %}
<!-- Cards, formularios y tablas aquí -->
{% endblock %}
</main>

<footer>© 2025 Sistema EBV</footer>

</div>
</div>

<script>
function toggleTheme(){
  const html=document.documentElement;
  html.classList.toggle("dark");
  const icon=document.getElementById("themeIcon");
  if(html.classList.contains("dark")){
    icon.className="fa-solid fa-sun";
    icon.style.color="var(--icon-color)";
  } else {
    icon.className="fa-solid fa-moon";
    icon.style.color="var(--icon-color)";
  }
  localStorage.setItem("theme", html.classList.contains("dark")?"dark":"light");
}
</script>

</body>
</html>
